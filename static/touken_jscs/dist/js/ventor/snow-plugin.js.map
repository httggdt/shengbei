{"version":3,"sources":["snow-plugin.js"],"names":["$","k","a","b","c","addEventListener","attachEvent","h","type","Top","Left","window","toLowerCase","document","documentElement","clientHeight","body","l","innerHeight","parentElement","i","this","parent","createEl","size","Math","random","el","style","width","round","height","maxLeft","offsetWidth","maxTop","offsetHeight","left","top","angle","minAngle","maxAngle","angleDelta","speed","$window","supportCanvas","setTimeout","eCan","createElement","getContext","Snow","element","settings","vendors","x","length","requestAnimationFrame","cancelAnimationFrame","callback","timeToCall","id","clearTimeout","flakes","flakeCount","count","mx","my","init","prototype","canvas","get","ctx","innerWidth","floor","y","opacity","push","velY","velX","stepSize","step","interaction","e","clientX","client","thiz","resize","clearRect","image","snow","render","flake","minDist","x2","y2","dist","sqrt","force","xcomp","ycomp","deltaV","windPower","cos","resetFlake","grd","createRadialGradient","addColorStop","startColor","endColor","fillStyle","beginPath","arc","PI","fill","drawImage","xarray","Array","yarray","allarray","selected_array","fn","userCanvas","each","scope","attributes","index","key","camelCase","name","Number","value","setting","attr","remove","createSnow","f","m","clearInterval","setInterval","n","d","splice","move","draw","classname","setAttribute","position","display","zIndex","appendChild","sin","removeChild","jQuery"],"mappings":"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","file":"snow-plugin.js","sourcesContent":["\"use strict\";\n\n// JavaScript Document\n(function ($) {\n    //for html5 canvas;\n    var $window = window,\n        $timeout = setTimeout;\n\n    var supportCanvas = function supportCanvas() {\n        var eCan = document.createElement(\"canvas\");\n        return typeof eCan.getContext == \"function\";\n    };\n    window.Snow = function (element, settings) {\n        (function () {\n            var lastTime = 0;\n            var vendors = ['webkit', 'moz'];\n            for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n                window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n                window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || // name has changed in Webkit\n                window[vendors[x] + 'CancelRequestAnimationFrame'];\n            }\n\n            if (!window.requestAnimationFrame) {\n                window.requestAnimationFrame = function (callback, element) {\n                    /*\r\n                    var currTime = new Date().getTime();\r\n                    var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\r\n                    var id = window.setTimeout(function () {\r\n                        callback(currTime + timeToCall);\r\n                    }, timeToCall);\r\n                    lastTime = currTime + timeToCall;\r\n                     */\n                    var timeToCall = 14; //freezes in safari for windows ,and mac to , so i change time to call with 14;\n                    var id = window.setTimeout(function () {\n                        callback(timeToCall);\n                    }, timeToCall);\n\n                    return id;\n                };\n            }\n            if (!window.cancelAnimationFrame) {\n                window.cancelAnimationFrame = function (id) {\n                    clearTimeout(id);\n                };\n            }\n        })();\n        this.settings = settings, this.flakes = [], this.flakeCount = settings.count, this.mx = -100, this.my = -100, this.init(element);\n    };\n    Snow.prototype.init = function (element) {\n        this.canvas = element.get(0), this.ctx = this.canvas.getContext(\"2d\"), this.canvas.width = $window.innerWidth, this.canvas.height = $window.innerHeight, this.flakes = [];\n        for (var i = 0; i < this.flakeCount; i++) {\n            var x = Math.floor(Math.random() * this.canvas.width),\n                y = Math.floor(Math.random() * this.canvas.height),\n                size = Math.floor(100 * Math.random()) % this.settings.size + 2,\n                speed = Math.floor(100 * Math.random()) % this.settings.speed + Math.random() * size / 10 + .5,\n                opacity = .5 * Math.random() + this.settings.opacity;\n            this.flakes.push({\n                speed: speed,\n                velY: speed,\n                velX: 0,\n                x: x,\n                y: y,\n                size: size,\n                stepSize: Math.random() / 30,\n                step: 0,\n                angle: 180,\n                opacity: opacity\n            });\n        }\n        1 == this.settings.interaction && this.canvas.addEventListener(\"mousemove\", function (e) {\n            this.mx = e.clientX, this.my = e.client;\n        });\n        var thiz = this;\n        $($window).resize(function () {\n            thiz.ctx.clearRect(0, 0, thiz.canvas.width, thiz.canvas.height), thiz.canvas.width = $window.innerWidth, thiz.canvas.height = $window.innerHeight;\n        });\n        if (typeof this.settings.image === \"string\") {\n            this.image = $(\"<img src='\" + this.settings.image + \"' style='display: none'>\");\n        }\n        ;\n\n        this.snow();\n    }, Snow.prototype.snow = function () {\n        var thiz = this,\n            render = function render() {\n            thiz.ctx.clearRect(0, 0, thiz.canvas.width, thiz.canvas.height);\n            for (var i = 0; i < thiz.flakeCount; i++) {\n                var flake = thiz.flakes[i],\n                    x = thiz.mx,\n                    y = thiz.my,\n                    minDist = 100,\n                    x2 = flake.x,\n                    y2 = flake.y,\n                    dist = Math.sqrt((x2 - x) * (x2 - x) + (y2 - y) * (y2 - y));\n                if (minDist > dist) {\n                    var force = minDist / (dist * dist),\n                        xcomp = (x - x2) / dist,\n                        ycomp = (y - y2) / dist,\n                        deltaV = force / 2;\n                    flake.velX -= deltaV * xcomp, flake.velY -= deltaV * ycomp;\n                } else switch (flake.velX *= .98, flake.velY <= flake.speed && (flake.velY = flake.speed), thiz.settings.windPower) {\n                    case !1:\n                        flake.velX += Math.cos(flake.step += .05) * flake.stepSize;\n                        break;\n                    case 0:\n                        flake.velX += Math.cos(flake.step += .05) * flake.stepSize;\n                        break;\n                    default:\n                        flake.velX += .01 + thiz.settings.windPower / 100;\n                }\n                if (flake.y += flake.velY, flake.x += flake.velX, (flake.y >= thiz.canvas.height || flake.y <= 0) && thiz.resetFlake(flake), (flake.x >= thiz.canvas.width || flake.x <= 0) && thiz.resetFlake(flake), 0 == thiz.settings.image) {\n                    var grd = thiz.ctx.createRadialGradient(flake.x, flake.y, 0, flake.x, flake.y, flake.size - 1);\n                    grd.addColorStop(0, thiz.settings.startColor), grd.addColorStop(1, thiz.settings.endColor), thiz.ctx.fillStyle = grd, thiz.ctx.beginPath(), thiz.ctx.arc(flake.x, flake.y, flake.size, 0, 2 * Math.PI), thiz.ctx.fill();\n                } else thiz.ctx.drawImage(thiz.image.get(0), flake.x, flake.y, 2 * flake.size, 2 * flake.size);\n            }\n            $window.cancelAnimationFrame(render), $window.requestAnimationFrame(render);\n        };\n        render();\n    }, Snow.prototype.resetFlake = function (flake) {\n        if (0 == this.settings.windPower || 0 == this.settings.windPower) flake.x = Math.floor(Math.random() * this.canvas.width), flake.y = 0;else if (this.settings.windPower > 0) {\n            var xarray = Array(Math.floor(Math.random() * this.canvas.width), 0),\n                yarray = Array(0, Math.floor(Math.random() * this.canvas.height)),\n                allarray = Array(xarray, yarray),\n                selected_array = allarray[Math.floor(Math.random() * allarray.length)];\n            flake.x = selected_array[0], flake.y = selected_array[1];\n        } else {\n            var xarray = Array(Math.floor(Math.random() * this.canvas.width), 0),\n                yarray = Array(this.canvas.width, Math.floor(Math.random() * this.canvas.height)),\n                allarray = Array(xarray, yarray),\n                selected_array = allarray[Math.floor(Math.random() * allarray.length)];\n            flake.x = selected_array[0], flake.y = selected_array[1];\n        }\n        flake.size = Math.floor(100 * Math.random()) % this.settings.size + 2, flake.speed = Math.floor(100 * Math.random()) % this.settings.speed + Math.random() * flake.size / 10 + .5, flake.velY = flake.speed, flake.velX = 0, flake.opacity = .5 * Math.random() + this.settings.opacity;\n    };\n\n    $.fn.snow = function () {\n        var userCanvas = supportCanvas();\n        userCanvas && $(this).each(function (i, e) {\n            var scope = {};\n            $.each(e.attributes, function (index, key) {\n                scope[$.camelCase(key.name)] = Number(Number(key.value)) ? Number(key.value) : key.value;\n            });\n            if (typeof scope.image === \"string\" && scope.image === \"false\") {\n                scope.image = false;\n            }\n            ;\n\n            new Snow($(e), {\n                speed: 1 || 0,\n                interaction: scope.interaction || !0,\n                size: scope.size || 2,\n                count: scope.count || 200,\n                opacity: scope.opacity || 1,\n                startColor: scope.startColor || \"rgba(255,255,255,1)\",\n                endColor: scope.endColor || \"rgba(255,255,255,0)\",\n                windPower: scope.windPower || 0,\n                image: scope.image || !1\n            });\n        });\n        if (!userCanvas) {\n            var setting = {};\n            $(this).each(function (i, e) {\n                setting[\"image\"] = $(e).attr(\"image\") || \"./imgs/snow.png\";\n                $(this).remove();\n                createSnow(\"\", 40);\n            });\n        }\n        ;\n    };\n\n    //for ie678\n    /**\r\n     * method createSnow(\"\", 40);\r\n     * method removeSnow();\r\n     */\n    function k(a, b, c) {\n        if (a.addEventListener) a.addEventListener(b, c, false);else a.attachEvent && a.attachEvent(\"on\" + b, c);\n    }\n\n    function g(a) {\n        if (typeof window.onload != \"function\") window.onload = a;else {\n            var b = window.onload;\n            window.onload = function () {\n                b();\n                a();\n            };\n        }\n    }\n\n    function h() {\n        var a = {};\n        for (type in {\n            Top: \"\",\n            Left: \"\"\n        }) {\n            var b = type == \"Top\" ? \"Y\" : \"X\";\n            if (typeof window[\"page\" + b + \"Offset\"] != \"undefined\") a[type.toLowerCase()] = window[\"page\" + b + \"Offset\"];else {\n                b = document.documentElement.clientHeight ? document.documentElement : document.body;\n                a[type.toLowerCase()] = b[\"scroll\" + type];\n            }\n        }\n        return a;\n    }\n\n    function l() {\n        var a = document.body,\n            b;\n        if (window.innerHeight) b = window.innerHeight;else if (a.parentElement.clientHeight) b = a.parentElement.clientHeight;else if (a && a.clientHeight) b = a.clientHeight;\n        return b;\n    };\n    var j = true;\n    var f = true;\n    var m = null;\n    var c = [];\n    var createSnow = function createSnow(a, b) {\n        clearInterval(m);\n        c = [];\n        m = setInterval(function () {\n            f && b > c.length && Math.random() < b * 0.0025 && c.push(new i(a));\n            !f && !c.length && clearInterval(m);\n            for (var e = h().top, n = l(), d = c.length - 1; d >= 0; d--) {\n                if (c[d]) if (c[d].top < e || c[d].top + c[d].size + 1 > e + n) {\n                    c[d].remove();\n                    c[d] = null;\n                    c.splice(d, 1);\n                } else {\n                    c[d].move();\n                    c[d].draw();\n                }\n            }\n        }, 40);\n        k(window, \"scroll\", function () {\n            for (var e = c.length - 1; e >= 0; e--) {\n                c[e].draw();\n            }\n        });\n    };\n    var removeSnow = function removeSnow() {\n        clearInterval(m);\n        do {\n            c.pop().remove();\n        } while (c.length);\n    };\n\n    //雪花的构造函数;\n    function i(a) {\n        this.parent = document.body;\n        this.createEl(this.parent, a);\n        this.size = Math.random() * 5 + 5;\n        this.el.style.width = Math.round(this.size) + \"px\";\n        this.el.style.height = Math.round(this.size) + \"px\";\n        this.maxLeft = document.body.offsetWidth - this.size;\n        this.maxTop = document.body.offsetHeight - this.size;\n        this.left = Math.random() * this.maxLeft;\n        this.top = h().top + 1;\n        this.angle = 1.4 + 0.2 * Math.random();\n        this.minAngle = 1.4;\n        this.maxAngle = 1.6;\n        this.angleDelta = 0.01 * Math.random();\n        this.speed = 2 + Math.random();\n    }\n\n    i.prototype = {\n        createEl: function createEl(a, b) {\n            this.el = document.createElement(\"img\");\n            this.el.classname = \"nicesnowclass\";\n            this.el.setAttribute(\"src\", b || \"./imgs/snow.png\");\n            this.el.style.position = \"absolute\";\n            this.el.style.display = \"block\";\n            this.el.style.zIndex = \"99999\";\n            this.parent.appendChild(this.el);\n        },\n        move: function move() {\n            if (this.angle < this.minAngle || this.angle > this.maxAngle) this.angleDelta = -this.angleDelta;\n            this.angle += this.angleDelta;\n            this.left += this.speed * Math.cos(this.angle * Math.PI);\n            this.top -= this.speed * Math.sin(this.angle * Math.PI);\n            if (this.left < 0) this.left = this.maxLeft;else if (this.left > this.maxLeft) this.left = 0;\n        },\n        draw: function draw() {\n            this.el.style.top = Math.round(this.top) + \"px\";\n            this.el.style.left = Math.round(this.left) + \"px\";\n        },\n        remove: function remove() {\n            this.parent.removeChild(this.el);\n            this.parent = this.el = null;\n        }\n    };\n})(jQuery);"]}