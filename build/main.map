{"version":3,"sources":["webpack:///webpack/bootstrap 848c9b50d2792f97d98a","webpack:///external \"express\"","webpack:///external \"async\"","webpack:///external \"request\"","webpack:///./server/conf/pro.conf.js","webpack:///./server/helper/http.js","webpack:///./server/helper/cache.js","webpack:///external \"body-parser\"","webpack:///./server/conf/index.js","webpack:///./server/apiCommon/apiCommon.js","webpack:///./server/index.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///./server/api/index.js","webpack:///./server/api/users.js","webpack:///./server/api/log.js","webpack:///./server/helper/os.js","webpack:///external \"os\"","webpack:///external \"fluent-logger\"","webpack:///./server/shengbei_pc/index.js","webpack:///./server/helper/data.js","webpack:///external \"redis\"","webpack:///./server/shengbei_yd/index.js","webpack:///external \"path\"","webpack:///external \"ejs\"","webpack:///./server/api/util.js"],"names":["conf","ip","port","cache","password","path","httpHelper","get","url","data","Promise","resolve","reject","request","method","json","headers","body","err","response","statusCode","verification","isString","JSON","parse","post","redis","require","client","createClient","version","on","console","log","key","getKey","reply","set","val","time","yz_conf","process","default","async","baseUrl","exports","api","name","callback","next","options","qs","timeout","res","apicallback","stringify","tokenget","token","tokenpost","status","message","app","express","host","env","HOST","PORT","ejs","engine","renderFile","use","bodyParser","xhr","util","cacehData","formateDate","static","req","render","NODE_ENV","rsData","newsData","heroData","picData","mediaData","playerData","faqData","wrapData","noticeData","activeData","params","id","detailData","renderSitemapHd","page","query","undefined","series","articleList","hotList","error","result","header","nowDate","Date","send","stack","setTimeout","listen","router","Router","users","parseInt","length","sendStatus","logger","createFluentSender","reconnectInterval","level","app_id","clinet_ip","getClientIp","formatMessage","emit","code","server_ip","serviceIp","os","network","networkInterfaces","i","family","address","ipAddress","forwardedIpsStr","forwardedIps","split","connection","remoteAddress","module","apiCommon","socket","isJson","obj","isjson","Object","prototype","toString","call","toLowerCase","isObject","isArray","arr","openapp","errorFun","nosql","noapi","format","custom","toLocaleString","Error","date","defaultDate","year","getFullYear","month","getMonth","day","getDate"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 848c9b50d2792f97d98a","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"async\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"async\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 2\n// module chunks = 0","var conf = {\r\n  ip:'127.0.0.1',\r\n  port:9421,\r\n  cache:{\r\n    ip:'10.22.17.12',\r\n    password:\"quai7ooShei4eyee\",\r\n  },\r\n  path:\"/data/html/shengbei.youzu.com/\",\r\n}\r\n\r\nexport default conf\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/conf/pro.conf.js","import verification from './data'\r\nimport request from 'request'\r\n\r\n\r\n\r\nlet httpHelper = {\r\n\t\tget:(url,data)=>{\r\n\t\t    return new Promise ((resolve, reject) => {\r\n\t\t        request.get({\r\n\t\t            url: url,\r\n\t\t            method: \"get\",\r\n\t\t            json: true,\r\n\t\t            headers: {\r\n\t\t                \"content-type\": \"application/json\",\r\n\t\t            },\r\n\t\t            body: data\r\n\t\t        },function(err,response,body){\r\n\t\t            // console.log('返回结果：',data,body);\r\n\t\t            if(!err && response.statusCode == 200){\r\n\t\t                if(body!=='null'){\r\n\t\t                \t//解析json    JSON.stringify(data)  转换成json\r\n\t\t                \tif(verification.isString(body)){\r\n\t\t                \t\tbody = JSON.parse(data);\r\n\t\t                \t}\r\n\t\t                    resolve(body);\r\n\t\t                }\r\n\t\t            }\r\n\t\t            resolve(false);\r\n\t\t        });    \r\n\t\t    });\r\n\t\t},\r\n\t\tpost:(url,data) =>{\r\n\t\t    return new Promise ((resolve, reject) => {\r\n\t\t        request.post({\r\n\t\t            url: url,\r\n\t\t            method: \"post\",\r\n\t\t            json: true,\r\n\t\t            headers: {\r\n\t\t                \"content-type\": \"application/x-www-form-urlencoded\",\r\n\t\t            },\r\n\t\t            body: data\r\n\t\t        },function(err,response,body){\r\n\t\t            // console.log('返回结果：',data,body);\r\n\t\t            if(!err && response.statusCode == 200){\r\n\t\t                if(body!=='null'){\r\n\t\t                \t//解析json    JSON.stringify(data)  转换成json\r\n\t\t                \tif(verification.isString(body)){\r\n\t\t                \t\tbody = JSON.parse(data);\r\n\t\t                \t}\r\n\t\t                    resolve(body);\r\n\t\t                }\r\n\t\t            }\r\n\t\t            resolve(false);\r\n\t\t        });    \r\n\t\t    });\r\n\t\t\r\n\t\t},\r\n}\r\n\r\nexport default httpHelper\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/helper/http.js","import conf from '../conf'\r\nvar redis = require('redis');\r\n\r\n/**\r\n * 封装redis 缓存基本方法\r\n */\r\n\r\nlet client = redis.createClient(conf.cache.port, conf.cache.ip);\r\n\r\nlet cache = {};\r\n\r\nvar version = 1;\r\n\r\n\r\n\r\nclient.on('error', function (err) {\r\n\t  console.log('Redis Error ' + err);\r\n});\r\n\r\n\r\n/**\r\n * 获取缓存数据\r\n */\r\ncache.get = function(key){\r\n\tkey = getKey(key);\r\n\r\n\treturn new Promise ((resolve, reject) => {\r\n\r\n\t\tclient.get(key, function(err, reply) {\r\n\t\t    if(err){\r\n\t\t    \tresolve(false);\r\n\t\t    }else{\r\n\t\t    \tresolve(reply);\r\n\t\t    }\r\n        });\r\n    });\r\n\r\n}\r\n\r\n/**\r\n * 设置缓存数据\r\n * @param key 缓存key\r\n * @param val 缓存数据   string\r\n * @param time 缓存时间 0 标示永久有效\r\n */\r\ncache.set = function(key,val ,time = 0){\r\n\tkey = getKey(key);\r\n\r\n\tclient.set(key, val,'EX' ,time);\r\n\r\n\treturn true;\r\n}\r\n\r\n\r\nfunction getKey(key){\r\n\treturn \"node:\" + key;\r\n}\r\n\r\n\r\nexport default cache\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/helper/cache.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","\r\n\r\n\r\nvar yz_conf = {};\r\n//引入环境配置\r\n\tif(process.env.NODE_ENV == 'production'){\r\n\tyz_conf = require('./pro.conf').default\r\n}else{\r\n\tyz_conf = require('./dev.conf').default\r\n}\r\n\r\n\r\n\r\n\r\nexport default yz_conf\n\n\n// WEBPACK FOOTER //\n// ./server/conf/index.js","var request = require('request');\r\nvar async = require('async');\r\nvar baseUrl = \"http://webapi.youzu.com\"; // 基础Url\r\n\r\nexports.api = {\r\n\t/**\r\n\t * @description ApiGet请求\r\n\t */\r\n\tget : function(name, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqs:data,\r\n\t\t\theaders: {},\r\n\t\t\ttimeout: 10000\r\n        };\r\n        // console.log(options)\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description ApiPost请求\r\n\t */\r\n\tpost : function(name, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\":'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description 头部带TOKEN的ApiGet请求\r\n\t */\r\n\ttokenget : function(name, token, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqs:data,\r\n\t\t\theaders: {\r\n\t\t\t\t\"X-token\": token,\r\n\t\t\t\t\"Content-Type\": 'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description 头部带TOKEN的ApiPost请求\r\n\t */\r\n\ttokenpost : function(name, token, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t\theaders: {\r\n\t\t\t\t\"X-token\": token,\r\n\t\t\t\t\"Content-Type\":'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * @description 接口返回统一处理\r\n */\r\nfunction apicallback(err, res, body, callback, next) {\r\n\tif(!err && res.statusCode == 200){\r\n\t\ttry{\r\n\t\t\tbody = JSON.parse(body);\r\n\t\t\tif(body.status != 200){\r\n\t\t\t\tif(body.message){\r\n\t\t\t\t\tcallback(body);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// exports.error.custom('Oops! 发生问题了', body.status, body.message, next);\r\n\t\t\t\t\t// body = [];\r\n\t\t\t\t\tbody.data = [];\r\n\t\t\t\t\tcallback(body)\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcallback(body);\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\t// console.log(err)\r\n\t\t\t// exports.error.noapi(next);\r\n\t\t\tbody.data = [];\r\n\t\t\tcallback(body)\r\n\t\t};\r\n\t}else{\r\n\t\tconsole.log('没有api')\r\n\t\tconsole.log(err)\r\n\t\t// exports.error.noapi(next);\r\n\t\tvar body = {};\r\n\t\tbody.data = [];\r\n\t\tcallback(body)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/apiCommon/apiCommon.js","import express from 'express'\r\n//引入路由\r\nimport api from './api'\r\n\r\nvar async = require('async');\r\n\r\nimport conf from './conf'\r\nimport shengbei_pc from './shengbei_pc'\r\nimport shengbei_yd from './shengbei_yd'\r\nconst app = express()\r\nconst host = process.env.HOST || conf.ip\r\n//设置端口号\r\nconst port = process.env.PORT || conf.port\r\nvar path = require(\"path\")\r\nimport httpHelper from './helper/http';\r\n//版本号\r\nvar version = 1;\r\n//配置模板渲染引擎\r\nvar ejs = require('ejs')\r\napp.engine('html', ejs.renderFile);\r\n//设置模板后缀\r\napp.set(\"view engine\", \"html\");\r\napp.set(\"view cache\", false);\r\napp.set('views', conf.path + 'views');\r\n\r\napp.set('port', port)\r\n\r\napp.use('/api', api)\r\n\r\nimport cache from './helper/cache';\r\nvar bodyParser = require('body-parser');\r\nimport util from './api/util.js';\r\nconst xhr = util.xhr;\r\nvar cacehData = false;\r\nconst formateDate = util.formateDate;\r\n\r\n\r\n\r\n\r\n//托管静态资源\r\napp.use(express.static('static'));\r\n\r\n\r\n// 圣杯之魂预约站-pc \r\napp.get(\"/yuyue.html\",function(req, res, next){\r\n  res.render(\"shengbei/shengbei_pc/yuyue\",{\r\n    env:process.env.NODE_ENV,\r\n  });\r\n}) \r\n\r\n// 圣杯之魂预约站-mob\r\napp.get(\"/m/yuyue.html\",function(req, res, next){\r\n  res.render(\"shengbei/shengbei_yd/yuyue\",{\r\n    env:process.env.NODE_ENV,\r\n  });\r\n})\r\n\r\n\r\n// -------------- PC端-----------开始-------------\r\n//1. 主页面路由\r\napp.get('/', function (req, res, next) {\r\n  (async function() {\r\n      var rsData = await httpHelper.get('//webapi.youzu.com/shengbei');\r\n      console.log(rsData)\r\n    res.render(\"shengbei/guanwang_pc/index.html\", { rsData: rsData});\r\n  })()\r\n})\r\n\r\n\r\n\r\n//3.新闻-新闻页\r\napp.get('/news(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/news?page=1');\r\n      // console.log(newsData.data)\r\n    res.render(\"shengbei/guanwang_pc/news.html\", { newsData: newsData});\r\n  })()\r\n})\r\n\r\n//4-1.新闻-最新页\r\napp.get('/hot(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/newNews?page=1');\r\n      // console.log(newsData.data)\r\n    res.render(\"shengbei/guanwang_pc/hot.html\", { newsData: newsData});\r\n  })()\r\n})\r\n//4-2.新闻-公告页\r\napp.get('/notice(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/notice?page=1');\r\n      // console.log(newsData.data.newslist)\r\n    res.render(\"shengbei/guanwang_pc/notice.html\", { newsData: newsData});\r\n  })()\r\n})\r\n//4-3.新闻-活动页\r\napp.get('/active(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/active?page=1');\r\n      // console.log(newsData.data.newslist)\r\n    res.render(\"shengbei/guanwang_pc/active.html\", { newsData: newsData});\r\n  })()\r\n})\r\n//4-4.新闻-媒体页\r\napp.get('/media(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/media?page=1');\r\n      // console.log(newsData.data)\r\n    res.render(\"shengbei/guanwang_pc/media.html\", { newsData: newsData});\r\n  })()\r\n})\r\n\r\n//5.英雄页\r\napp.get('/hero(\\.html)?', function (req, res, next) {\r\n\r\n  (async function() {\r\n      var heroData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/default/heroSearch');\r\n      // console.log(heroData.data.hero[0].skill.pic)\r\n    res.render(\"shengbei/guanwang_pc/hero.html\", { heroData: heroData});\r\n  })()\r\n\r\n})\r\n\r\n//6.碎片(影像)页\r\napp.get('/yingxiang(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var picData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/default/game_pic');\r\n      var mediaData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/default/media');\r\n      // console.log(picData.data)\r\n      // console.log(mediaData.data.game_img[0].thumb[1])\r\n    res.render(\"shengbei/guanwang_pc/yingxiang.html\", { picData: picData, mediaData: mediaData});\r\n  })()\r\n})\r\n\r\n//7.新手页\r\napp.get('/adv1(\\.html)?', function (req, res, next) {\r\n  \r\n  (async function() {\r\n      var playerData = await httpHelper.get('//webapi.youzu.com/shengbei/new?page=1');\r\n      // console.log(playerData.data.totalPage)\r\n    res.render(\"shengbei/guanwang_pc/adv1.html\", { playerData: playerData});\r\n  })()\r\n})\r\n\r\n//8.高手页\r\napp.get('/adv2(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var playerData = await httpHelper.get('//webapi.youzu.com/shengbei/old?page=1');\r\n      // console.log(playerData.data)\r\n    res.render(\"shengbei/guanwang_pc/adv2.html\", { playerData: playerData});\r\n  })()\r\n})\r\n\r\n//9.FAQ页\r\napp.get('/faq(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var faqData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/mobile/faq');\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/newNews');\r\n      \r\n      // console.log(faqData.data)\r\n    res.render(\"shengbei/guanwang_pc/faq.html\", { faqData: faqData, newsData:newsData});\r\n  })()\r\n})\r\n\r\n  \r\n\r\n// -----------PC端----------结束---------------\r\n\r\n\r\n\r\n// --------------  mob端---------开始---------------\r\n//1. 主页面路由\r\napp.get('/m/', function (req, res, next) {\r\n  (async function() {\r\n      var rsData = await httpHelper.get('//webapi.youzu.com/shengbei');\r\n      var mediaData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/default/media');\r\n      var wrapData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/mobile/getSowingMap');\r\n      \r\n      // console.log(rsData.data)\r\n    res.render(\"shengbei/guanwang_yd/index.html\", { rsData: rsData, mediaData:mediaData, wrapData:wrapData});\r\n  })()\r\n})\r\n\r\n//2.新闻页\r\napp.get('/m/news(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      // 新闻数据\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/news');\r\n      //公告数据\r\n      var noticeData = await httpHelper.get('//webapi.youzu.com/shengbei/notice');\r\n      //活动\r\n      var activeData = await httpHelper.get('//webapi.youzu.com/shengbei/active');\r\n      //媒体\r\n      var mediaData = await httpHelper.get('//webapi.youzu.com/shengbei/media');\r\n      // console.log(newsData.data)\r\n    res.render(\"shengbei/guanwang_yd/news.html\", { newsData: newsData, noticeData:noticeData, activeData:activeData, mediaData:mediaData});\r\n  })()\r\n})\r\n\r\n\r\n\r\n//3-1.新手页\r\napp.get('/m/listBeginner(\\.html)?', function (req, res, next) {\r\n  // res.render(\"shengbei/guanwang_yd/listBeginner.html\");\r\n  (async function() {\r\n      var playerData = await httpHelper.get('//webapi.youzu.com/shengbei/new');\r\n      // console.log(playerData.data.totalPage)\r\n    res.render(\"shengbei/guanwang_yd/listBeginner.html\", { playerData: playerData});\r\n  })()\r\n})\r\n//3-2.高手页\r\napp.get('/m/listBetter(\\.html)?', function (req, res, next) {\r\n  // res.render(\"shengbei/guanwang_yd/listBetter.html\");\r\n  (async function() {\r\n      var playerData = await httpHelper.get('//webapi.youzu.com/shengbei/old');\r\n      // console.log(playerData.data)\r\n      // console.log(playerData.data.totalPage)\r\n    res.render(\"shengbei/guanwang_yd/listBetter.html\", { playerData: playerData});\r\n  })()\r\n})\r\n\r\n// 4.FAQ页\r\napp.get('/m/faq(\\.html)?', function (req, res, next) {\r\n  (async function() {\r\n      var faqData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/mobile/faq');\r\n      // console.log(faqData.data)\r\n    res.render(\"shengbei/guanwang_yd/faq.html\", { faqData: faqData});\r\n  })()\r\n})\r\n\r\n//5.原画页\r\napp.get('/m/pic(\\.html)?', function (req, res, next) {\r\n  // res.render(\"shengbei/guanwang_yd/pic.html\");\r\n  (async function() {\r\n      var picData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/default/game_pic');\r\n      var mediaData = await httpHelper.get('//webapi.youzu.com/sbGuanwang/default/media');\r\n      // console.log(picData.data)\r\n      // console.log(mediaData.data.game_img[0].thumb[1])\r\n    res.render(\"shengbei/guanwang_yd/pic.html\", { picData: picData, mediaData: mediaData});\r\n  })()\r\n})\r\n\r\n//2-0. 新闻详情页\r\napp.get('/m/:name/:id?(\\.html)', function (req, res, next) {\r\n  (async function() {\r\n      var name = req.params.name;\r\n      var id = req.params.id;\r\n      // console.log(name, id);\r\n\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/newNews');\r\n  //     // console.log(1111111,'//webapi.youzu.com/shengbei/'+name+'/'+id)\r\n      var detailData = await httpHelper.get('//webapi.youzu.com/shengbei/'+name+'/'+id);\r\n  //     // console.log(newsData.data)\r\n      res.render(\"shengbei/guanwang_yd/news_details.html\", { newsData: newsData, detailData:detailData,name:name, id:id});\r\n\r\n  })()\r\n})\r\n\r\n// -----------   mob端---------结束---------------\r\n\r\n\r\n\r\n\r\napp.get('/sitemap.xml', renderSitemapHd); // 搜索爬虫\r\napp.get('/sitemap.html', renderSitemapHd); // 搜索爬虫\r\napp.get('/sitemap.txt', renderSitemapHd); // 搜索爬虫\r\n\r\n\r\n//搜索爬虫\r\nfunction renderSitemapHd(req, res, next) {\r\n  var page = req.query.page == undefined ? 1 : req.query.page;\r\n  async.series({\r\n      articleList: function(callback) {\r\n          xhr.get('shengbei/guanwang_pc/news.html?id=news&page=1&count=999', {}, function(res) {\r\n              callback(null, res.data);\r\n          });\r\n      },\r\n      hotList: function(callback) {\r\n        xhr.get('shengbei/guanwang_pc/hot.html?id=hot&page=1&count=999', {}, function(res) {\r\n            callback(null, res.data);\r\n        });\r\n    }\r\n  }, function(error, result) {\r\n      res.header('Content-Type', 'application/xml');\r\n      res.header('Cache-Control', 'no-cache');\r\n      res.header('Pragma', 'no-cache');\r\n      res.header('Expires', '-1');\r\n      res.render('shengbei/guanwang_pc/sitemap', {\r\n          env: process.env.NODE_ENV,\r\n          articleList: result.articleList == null ? [] : result.articleList,\r\n          hotList: result.hotList == null ? [] : result.hotList,\r\n          nowDate:formateDate(new Date())\r\n      });\r\n\r\n  });\r\n}\r\n\r\n//2.新闻详情页 ------------pc-----------\r\napp.get('/:name/:id?(\\.html)', function (req, res, next) {\r\n  (async function() {\r\n      var name = req.params.name;\r\n      var id = req.params.id;\r\n      var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/newNews');\r\n      var detailData = await httpHelper.get('//webapi.youzu.com/shengbei/'+ name+'/'+ id);\r\n      // console.log(newsData.data)\r\n      res.render(\"shengbei/guanwang_pc/news_details.html\", { newsData: newsData, detailData:detailData,name:name, id:id});\r\n\r\n\r\n  })()\r\n})\r\n//新闻详情页 ------------pc-----------\r\n\r\n\r\n\r\n//定义错误处理方法\r\napp.use(function(err, req, res, next) {\r\n    console.log(err + '测试')\r\n\t  // console.error(err.stack);\r\n\t  res.status(500).send('Something broke!');\r\n});\r\n\r\napp.use(function(err, req, res, next) {\r\n  console.log(\"报错日志\",err.stack);\r\n  res.status(404).send('Something broke!');\r\n});\r\n;\r\n\r\napp.use(function(req, res, next) {\r\n  // 设置所有HTTP请求的超时时间\r\n  req.setTimeout(10000);\r\n  // 设置所有HTTP请求的服务器响应超时时间\r\n  res.setTimeout(10000);\r\n  next();\r\n});\r\n\r\n\r\n// Listen the server\r\napp.listen(port, host)\r\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 10\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 11\n// module chunks = 0","import { Router } from 'express'\r\n\r\nimport users from './users'\r\nimport log from './log'\r\n\r\nconst router = Router()\r\n\r\n\r\n// Add USERS Routes\r\nrouter.use(users)\r\nrouter.use(log)\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","import { Router } from 'express'\r\n\r\nconst router = Router()\r\n\r\n// Mock Users\r\nconst users = [\r\n  { name: 'Alexandre' },\r\n  { name: 'Pooya' },\r\n  { name: 'Sébastien' },\r\n]\r\n\r\n/* GET users listing. */\r\nrouter.get('/users', function (req, res, next) {\r\n  res.json(users)\r\n})\r\n\r\n/* GET user by ID. */\r\nrouter.get('/users/:id', function (req, res, next) {\r\n  const id = parseInt(req.params.id)\r\n  if (id >= 0 && id < users.length) {\r\n    res.json(users[id])\r\n  } else {\r\n    res.sendStatus(404)\r\n  }\r\n})\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users.js","\r\n\r\nimport { Router } from 'express'\r\nvar ip = require('../helper/os')\r\n\r\n\r\nvar logger = require('fluent-logger').createFluentSender('log.hd-.application', {\r\n   host: '10.7.32.240',\r\n   port: 24224,\r\n   timeout: 3.0,\r\n   reconnectInterval: 600000 // 10 minutes\r\n});\r\nlogger.on('error', (error) => {\r\n  console.log('fluent-logger error',error);\r\n});\r\nlogger.on('connect', () => {\r\n  console.log('fluent-logger','connected!');\r\n});\r\n\r\nconst router = Router()\r\n\r\nvar json =  {\r\n//\t    \"message\": \"这是日志消息\", //日志消息\r\n////\t    \"category\": \"yii\\\\db\\\\Command::query\",   //日志分类\r\n//\t    \"level\": \"info\",\t//日志等级\r\n////\t    \"timeline\": \"\", //客户端时间\r\n//\t    \"server_ip\": \"10.6.55.3\",   //服务器ip\r\n//\t    \"clinet_ip\": \"58.246.221.75\", //客户端ip\r\n\t  }\r\n/* GET users listing. */\r\nrouter.get('/log', function (req, res, next) {\r\n\tconsole.log('/log')\r\n\tvar message = {}\r\n\tmessage.level = req.query.level\r\n\tmessage.host = req.host\r\n\tmessage.app_id = req.query.app_id\r\n\tmessage.message = req.query.message + \"-----\" + req.headers['user-agent']\r\n//\tmessage.message = '这是日志消息'\r\n\t//message.category = \"log.hd.web\"\r\n\t//message.timeline = req.query.timeline\r\n\tmessage.clinet_ip = ip.getClientIp(req)\r\n\tvar message = formatMessage(message)\r\n\t\r\n  logger.emit('web',message);\r\n  res.json({code:100})\r\n})\r\n\r\n//格式化消息\r\nfunction formatMessage(message){\r\n\tjson.server_ip = ip.serviceIp()\r\n\tjson.level = message.level\r\n\tjson.app_id = message.app_id\r\n\tjson.host = message.host\r\n//\tjson.category = message.category\r\n//\tjson.timeline = message.timeline\r\n\tjson.message = message.message\r\n\tjson.clinet_ip = message.clinet_ip\r\n\tconsole.log(json)\r\n\treturn json;\r\n}\r\n\r\n\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/log.js","var os = require('os');\r\n\r\nvar ip = {\r\n\t\tserviceIp:function(){\r\n\t\t\tvar network = os.networkInterfaces();\r\n\t\t\tfor (var key in network){\r\n\t\t\t\tif(key == \"eth0\" || key == \"本地连接\" ){\r\n\t\t\t\t\tfor(var i = 0; i < network[key].length; i++){\r\n\t\t\t\t\t\tif(network[key][i].family === 'IPv4'){\r\n\t\t\t\t\t\t\treturn network[key][i].address;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetClientIp:function (req) {  \r\n\t\t    var ipAddress;  \r\n\t\t    var forwardedIpsStr = req.header('x-forwarded-for');   \r\n\t\t    if (forwardedIpsStr) {  \r\n\t\t        var forwardedIps = forwardedIpsStr.split(',');  \r\n\t\t        ipAddress = forwardedIps[0];  \r\n\t\t    }  \r\n\t\t    if (!ipAddress) {  \r\n\t\t        ipAddress = req.connection.remoteAddress;  \r\n\t\t    }  \r\n\t\t    return ipAddress;  \r\n\t\t}  \r\n}\r\n\r\n\r\nmodule.exports = ip\n\n\n// WEBPACK FOOTER //\n// ./server/helper/os.js","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"fluent-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fluent-logger\"\n// module id = 17\n// module chunks = 0","import { Router } from 'express';\r\nvar async = require('async');\r\nimport request from 'request';\r\nimport httpHelper from '../helper/http';\r\nimport cache from '../helper/cache';\r\nimport conf from '../conf/pro.conf';\r\nimport apiCommon from '../apiCommon/apiCommon.js';\r\nconst api = apiCommon.api;\r\n\r\nvar bodyParser = require('body-parser');\r\nconst router = Router()\r\nvar cacehData = false;\r\n// console.log(process.env.NODE_ENV + '123')\r\n\r\n\r\n// 更改监听的路由\r\n\r\nfunction getClientIp(req) {\r\n\treturn req.headers['x-forwarded-for'] ||\r\n\treq.connection.remoteAddress ||\r\n\treq.socket.remoteAddress ||\r\n\treq.connection.socket.remoteAddress;\r\n};\r\n\r\n\r\n// //1. 主页面路由\r\n// router.get('/', function (req, res, next) {\r\n//     res.redirect(\"index.html\");\r\n// })\r\n\r\n// router.get('/index(\\.html)?', function (req, res, next) { \r\n    \r\n//     (async function() {\r\n//         var rsData = await httpHelper.get('http://webapi.youzu.com/shengbei');\r\n//         // console.log(rsData.data.hero[0].skill)\r\n// \t    res.render(\"shengbei/guanwang_pc/index.html\", { rsData: rsData});\r\n//     })()\r\n// })\r\n\r\n\r\n// //2.新闻页\r\n// router.get('/news(\\.html)?', function (req, res, next) {\r\n\r\n//     (async function() {\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/news');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/news.html\", { newsData: newsData});\r\n//     })()\r\n\r\n// })\r\n\r\n// //3.新闻详情页\r\n// router.get('/news_details/:name/:id?(\\.html)', function (req, res, next) {\r\n//     (async function() {\r\n//         var name = req.params.name;\r\n//         var id = req.params.id;\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/newNews');\r\n//         var detailData = await httpHelper.get('http://webapi.youzu.com/shengbei/'+name+'/'+ id);\r\n//         // console.log(detailData.data);\r\n//         res.render(\"shengbei/guanwang_pc/news_details.html\", { newsData: newsData, detailData:detailData});\r\n//     })()\r\n// })\r\n\r\n\r\n// //4-1.新闻-最新页\r\n// router.get('/hot(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/newNews?page:1');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/hot.html\", { newsData: newsData});\r\n//     })()\r\n// })\r\n// //4-2.新闻-新闻页\r\n// router.get('/news(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/news?page:1');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/news.html\", { newsData: newsData});\r\n//     })()\r\n// })\r\n// //4-3.新闻-公告页\r\n// router.get('/notice(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/notice?page:1');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/notice.html\", { newsData: newsData});\r\n//     })()\r\n// })\r\n// //4-4.新闻-活动页\r\n// router.get('/active(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/active?page:1');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/active.html\", { newsData: newsData});\r\n//     })()\r\n// })\r\n// //4-5.新闻-媒体页\r\n// router.get('/media(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/media?page:1');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/media.html\", { newsData: newsData});\r\n//     })()\r\n// })\r\n\r\n\r\n// //5.英雄页\r\n// router.get('/hero(\\.html)?', function (req, res, next) {\r\n\r\n//     (async function() {\r\n//         var heroData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/heroSearch');\r\n//         // console.log(heroData.data.hero[0].skill.pic)\r\n// \t    res.render(\"shengbei/guanwang_pc/hero.html\", { heroData: heroData});\r\n//     })()\r\n\r\n// })\r\n\r\n// //6.碎片(影像)页\r\n// router.get('/yingxiang(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var picData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/game_pic');\r\n//         var mediaData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/media');\r\n//         // console.log(picData.data)\r\n//         // console.log(mediaData.data.game_img[0].thumb[1])\r\n// \t    res.render(\"shengbei/guanwang_pc/yingxiang.html\", { picData: picData, mediaData: mediaData});\r\n//     })()\r\n// })\r\n\r\n// //7.新手页\r\n// router.get('/adv1(\\.html)?', function (req, res, next) {\r\n    \r\n//     (async function() {\r\n//         var playerData = await httpHelper.get('http://webapi.youzu.com/shengbei/new?page:1');\r\n//         // console.log(playerData.data.totalPage)\r\n// \t    res.render(\"shengbei/guanwang_pc/adv1.html\", { playerData: playerData});\r\n//     })()\r\n// })\r\n\r\n// //8.高手页\r\n// router.get('/adv2(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var playerData = await httpHelper.get('http://webapi.youzu.com/shengbei/old?page:1');\r\n//         // console.log(playerData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/adv2.html\", { playerData: playerData});\r\n//     })()\r\n// })\r\n\r\n// //9.FAQ页\r\n// router.get('/faq(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var faqData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/mobile/faq');\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/newNews');\r\n        \r\n//         // console.log(faqData.data)\r\n// \t    res.render(\"shengbei/guanwang_pc/faq.html\", { faqData: faqData, newsData:newsData});\r\n//     })()\r\n// })\r\n\r\n\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/shengbei_pc/index.js","\r\n\r\n\r\n//判断是否是json\r\nexports.isJson = function(obj){\r\n\tvar isjson = typeof(obj) == \"object\" && Object.prototype.toString.call(obj).toLowerCase() == \"[object object]\" && !obj.length; \r\n\treturn isjson;\r\n}\r\n\r\n//判断是否是对象\r\nexports.isObject = function (obj){\r\n    return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\n \r\n//判断是否是数组\r\nexports.isArray = function (arr) { \r\n\treturn Object.prototype.toString.call(arr) === '[object Array]';\r\n}\r\n\r\n\r\n//判断是否是字符串\r\nexports.isString = function (arr) { \r\n\treturn Object.prototype.toString.call(arr) === '[object Array]';\r\n}\r\n  \r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/helper/data.js","module.exports = require(\"redis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redis\"\n// module id = 20\n// module chunks = 0","import {\r\n    Router\r\n} from 'express';\r\nvar async = require('async');\r\nimport request from 'request';\r\nimport httpHelper from '../helper/http';\r\nimport cache from '../helper/cache';\r\nimport conf from '../conf/pro.conf';\r\nimport apiCommon from '../apiCommon/apiCommon.js';\r\nconst api = apiCommon.api;\r\n\r\nvar bodyParser = require('body-parser');\r\nconst router = Router()\r\nvar cacehData = false;\r\n// console.log(process.env.NODE_ENV + '123')\r\n\r\n// //1. 主页面路由\r\n// router.get('/m', function (req, res, next) {\r\n//     (async function() {\r\n//         var rsData = await httpHelper.get('http://webapi.youzu.com/shengbei');\r\n//         var mediaData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/media');\r\n//         var wrapData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/mobile/getSowingMap');\r\n\r\n//         // console.log(rsData.data)\r\n// \t    res.render(\"shengbei/guanwang_yd/index.html\", { rsData: rsData, mediaData:mediaData, wrapData:wrapData});\r\n//     })()\r\n// })\r\n// router.get('/m/index(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var rsData = await httpHelper.get('http://webapi.youzu.com/shengbei');\r\n//         var mediaData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/media');\r\n//         var wrapData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/mobile/getSowingMap');\r\n        \r\n//         // console.log(rsData.data)\r\n// \t    res.render(\"shengbei/guanwang_yd/index.html\", { rsData: rsData, mediaData:mediaData, wrapData:wrapData});\r\n//     })()\r\n// })\r\n\r\n// //2.新闻页\r\n// router.get('/m/news(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         // 新闻数据\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/news');\r\n//         //公告数据\r\n//         var noticeData = await httpHelper.get('http://webapi.youzu.com/shengbei/notice');\r\n//         //活动\r\n//         var activeData = await httpHelper.get('http://webapi.youzu.com/shengbei/active');\r\n//         //媒体\r\n//         var mediaData = await httpHelper.get('http://webapi.youzu.com/shengbei/media');\r\n//         // console.log(newsData.data)\r\n// \t    res.render(\"shengbei/guanwang_yd/news.html\", { newsData: newsData, noticeData:noticeData, activeData:activeData, mediaData:mediaData});\r\n//     })()\r\n// })\r\n\r\n// //2-0. 新闻详情页\r\n// router.get('/m/news_details/:name/:id(\\.html)?', function (req, res, next) {\r\n//     // res.render(\"shengbei/guanwang_yd/news_details.html\");\r\n//     (async function() {\r\n//         var name = req.params.name\r\n//         var id = req.params.id.substring(0,req.params.id.length-5)\r\n//     //     // console.log(name, id)\r\n\r\n//         var newsData = await httpHelper.get('http://webapi.youzu.com/shengbei/newNews');\r\n//     //     // console.log(1111111,'http://webapi.youzu.com/shengbei/'+name+'/'+id)\r\n//         var detailData = await httpHelper.get('http://webapi.youzu.com/shengbei/:'+name+'/:'+id);\r\n//     //     // console.log(newsData.data)\r\n//         res.render(\"shengbei/guanwang_yd/news_details.html\", { newsData: newsData, detailData:detailData});\r\n\r\n//     })()\r\n// })\r\n\r\n\r\n// //3-1.新手页\r\n// router.get('/m/listBeginner(\\.html)?', function (req, res, next) {\r\n//     // res.render(\"shengbei/guanwang_yd/listBeginner.html\");\r\n//     (async function() {\r\n//         var playerData = await httpHelper.get('http://webapi.youzu.com/shengbei/new');\r\n//         // console.log(playerData.data.totalPage)\r\n// \t    res.render(\"shengbei/guanwang_yd/listBeginner.html\", { playerData: playerData});\r\n//     })()\r\n// })\r\n// //3-2.高手页\r\n// router.get('/m/listBetter(\\.html)?', function (req, res, next) {\r\n//     // res.render(\"shengbei/guanwang_yd/listBetter.html\");\r\n//     (async function() {\r\n//         var playerData = await httpHelper.get('http://webapi.youzu.com/shengbei/old');\r\n//         // console.log(playerData.data)\r\n//         // console.log(playerData.data.totalPage)\r\n// \t    res.render(\"shengbei/guanwang_yd/listBetter.html\", { playerData: playerData});\r\n//     })()\r\n// })\r\n\r\n// // 4.FAQ页\r\n// router.get('/m/faq(\\.html)?', function (req, res, next) {\r\n//     (async function() {\r\n//         var faqData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/mobile/faq');\r\n//         console.log(faqData.data)\r\n// \t    res.render(\"shengbei/guanwang_yd/faq.html\", { faqData: faqData});\r\n//     })()\r\n// })\r\n\r\n// //5.原画页\r\n// router.get('/m/pic(\\.html)?', function (req, res, next) {\r\n//     // res.render(\"shengbei/guanwang_yd/pic.html\");\r\n//     (async function() {\r\n//         var picData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/game_pic');\r\n//         var mediaData = await httpHelper.get('http://webapi.youzu.com/sbGuanwang/default/media');\r\n//         // console.log(picData.data)\r\n//         // console.log(mediaData.data.game_img[0].thumb[1])\r\n// \t    res.render(\"shengbei/guanwang_yd/pic.html\", { picData: picData, mediaData: mediaData});\r\n//     })()\r\n// })\r\n\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/shengbei_yd/index.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 23\n// module chunks = 0","var request = require('request');\r\nvar async = require('async');\r\nvar baseUrl = \"https://uapi.youzu.com/api/158\"; // 后端接口Url\r\n\r\nexports.xhr = {\r\n\t/**\r\n\t * @description ApiGet请求\r\n\t */\r\n\tget : function(name, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqs:data,\r\n\t\t\theaders: {},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description ApiPost请求\r\n\t */\r\n\tpost : function(name, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\":'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description 头部带TOKEN的ApiGet请求\r\n\t */\r\n\ttokenget : function(name, token, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqs:data,\r\n\t\t\theaders: {\r\n\t\t\t\t\"X-token\": token,\r\n\t\t\t\t\"Content-Type\": 'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description 头部带TOKEN的ApiPost请求\r\n\t */\r\n\ttokenpost : function(name, token, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t\theaders: {\r\n\t\t\t\t\"X-token\": token,\r\n\t\t\t\t\"Content-Type\":'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * @description 接口返回统一处理\r\n */\r\nfunction apicallback(err, res, body, callback, next) {\r\n\tif(!err && res.statusCode == 200){\r\n\t\ttry{\r\n\t\t\tbody = JSON.parse(body);\r\n\t\t\tif(body.status != 200){\r\n\t\t\t\tif(body.message){\r\n\t\t\t\t\tcallback(body);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// exports.error.custom('Oops! 发生问题了', body.status, body.message, next);\r\n\t\t\t\t\t// body = [];\r\n\t\t\t\t\tbody.data = [];\r\n\t\t\t\t\tcallback(body)\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcallback(body);\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\t// console.log(err)\r\n\t\t\t// exports.error.noapi(next);\r\n\t\t\tbody.data = [];\r\n\t\t\tcallback(body)\r\n\t\t};\r\n\t}else{\r\n\t\tconsole.log('没有api')\r\n\t\t// exports.error.noapi(next);\r\n\t\tvar body = {};\r\n\t\tbody.data = [];\r\n\t\tcallback(body)\r\n\t}\r\n}\r\n\r\n/**\r\n * @description 错误&提示处理\r\n */\r\nexports.error = {\r\n\topenapp:function(next) {\r\n\t\terrorFun(\"Access error\", 200, \"此页面只允许在客户端中打开\", next);\r\n\t},\r\n\tnosql:function(next) {\r\n\t\terrorFun(\"Database connection failed\", 500, \"无法连接到数据库或连接超时\", next);\r\n\t},\r\n\tnoapi:function(next) {\r\n\t\terrorFun(\"Interface failed\", 500, \"无法链接到接口或链接超时\", next);\r\n\t},\r\n\tformat:function(next) {\r\n\t\terrorFun(\"Format error\", 500, \"接口不是一个有效的JSON格式\", next);\r\n\t},\r\n\tdefault:function(next) {\r\n\t\tconsole.log(next)\r\n\t\terrorFun(\"Oops! 发生问题了 :(\", 500, \"无法打开这个页面\", next);\r\n\t},\r\n\tcustom:function(name, status, stack, next) {\r\n\t\terrorFun(name, status, stack, next);\r\n\t}\r\n}\r\n\r\nfunction errorFun (name, status, stack, next) {\r\n\tconsole.log('[' + new Date().toLocaleString() + ']', name, status);\r\n\tvar err = new Error(name);\r\n\t\terr.status = status;\r\n\t\terr.stack = stack;\r\n\t\tconsole.log(next)\r\n\tnext(err);\r\n}\r\n\r\n// 日期格式化\r\nexports.formateDate = function (date) {\r\n    var defaultDate = date ? new Date(date) : new Date();\r\n    var year = defaultDate.getFullYear();\r\n    var month = defaultDate.getMonth() + 1;\r\n    var day = defaultDate.getDate();\r\n    month = month < 10 ? '0'+ month : month;\r\n    day = day < 10 ? '0' + day : day;\r\n    return year + '-' + month + '-' + day\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/util.js"],"sourceRoot":""}